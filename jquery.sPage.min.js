!function(n){"use strict";var a={page:1,pageSize:10,total:0,showTotal:!1,totalTxt:"共{total}条",noData:!1,showSkip:!1,showPN:!0,prevPage:"上一页",nextPage:"下一页",fastForward:0,backFun:function(t){}};function e(t,e){this.element=n(t),this.settings=n.extend({},a,e),this.pageNum=1,this.pageList=[],this.pageTatol=0,this.init()}n.extend(e.prototype,{init:function(){this.element.empty(),this.viewHtml()},creatHtml:function(t){t==this.settings.page?this.pageList.push('<button class="active" data-page='+t+">"+t+"</button>"):this.pageList.push("<button data-page="+t+">"+t+"</button>")},viewHtml:function(){var t=this.settings,e=0,a=[];if(0<t.total)e=Math.ceil(t.total/t.pageSize);else{if(!t.noData)return;e=1,t.page=1,t.total=0}if(this.pageTatol=e,this.pageNum=t.page,t.showTotal&&a.push('<div class="spage-total">'+t.totalTxt.replace(/\{(\w+)\}/gi,t.total)+"</div>"),a.push('<div class="spage-number">'),this.pageList=[],t.showPN&&(1==t.page?this.pageList.push('<button class="button-disabled" data-page="prev">'+t.prevPage+"</button>"):this.pageList.push('<button data-page="prev">'+t.prevPage+"</button>")),e<=6)for(var s=1;s<e+1;s++)this.creatHtml(s);else if(t.page<5){for(s=1;s<=5;s++)this.creatHtml(s);this.pageList.push('<button data-page="after" class="spage-after">...</button><button data-page='+e+">"+e+"</button>")}else if(t.page>e-4){this.pageList.push('<button data-page="1">1</button><button data-page="before" class="spage-before">...</button>');for(s=e-4;s<=e;s++)this.creatHtml(s)}else{this.pageList.push('<button data-page="1">1</button><button data-page="before" class="spage-before">...</button>');for(s=t.page-2;s<=Number(t.page)+2;s++)this.creatHtml(s);this.pageList.push('<button data-page="after" class="spage-after">...</button><button data-page='+e+">"+e+"</button>")}t.showPN&&(t.page==e?this.pageList.push('<button class="button-disabled" data-page="next">'+t.nextPage+"</button>"):this.pageList.push('<button data-page="next">'+t.nextPage+"</button>")),a.push(this.pageList.join("")),a.push("</div>"),t.showSkip&&a.push('<div class="spage-skip">跳至&nbsp;<input type="text" value="'+t.page+'"/>&nbsp;页&nbsp;&nbsp;<button data-page="go">确定</button></div>'),this.element.html(a.join("")),this.clickBtn()},clickBtn:function(){var a=this,s=this.settings,i=this.element,p=this.pageTatol;this.element.off("click","button"),this.element.on("click","button",function(){var t=n(this).data("page");switch(t){case"prev":s.page=1<=s.page-1?s.page-1:1,t=s.page;break;case"next":s.page=Number(s.page)+1<=p?Number(s.page)+1:p,t=s.page;break;case"before":s.page=1<=s.page-s.fastForward?s.page-s.fastForward:1,t=s.page;break;case"after":s.page=Number(s.page)+Number(s.fastForward)<=p?Number(s.page)+Number(s.fastForward):p,t=s.page;break;case"go":var e=parseInt(i.find("input").val());if(!(/^[0-9]*$/.test(e)&&1<=e&&e<=p))return;t=s.page=e;break;default:s.page=t}t!=a.pageNum&&(a.pageNum=s.page,a.viewHtml(),s.backFun(t))}),this.element.on("keyup","input",function(t){if(13==t.keyCode){var e=parseInt(i.find("input").val());if(!(/^[0-9]*$/.test(e)&&1<=e&&e<=p&&e!=a.pageNum))return;s.page=e,a.pageNum=e,a.viewHtml(),s.backFun(e)}}),0<s.fastForward&&(i.find(".spage-after").hover(function(){n(this).html("&raquo;")},function(){n(this).html("...")}),i.find(".spage-before").hover(function(){n(this).html("&laquo;")},function(){n(this).html("...")}))}}),n.fn.sPage=function(t){return this.each(function(){new e(this,t)})}}(jQuery,(window,document));